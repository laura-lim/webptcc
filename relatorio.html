<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatórios - Cantina Fácil</title>
    <style>
        /* Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #FFFFFF;
            display: flex;
            min-height: 100vh;
            overflow: hidden; /* Impede scroll na página inteira */
        }

        /* Layout */
        .container {
            display: flex;
            min-height: 100vh;
            width: 100%;
        }

        /* Sidebar */
        .sidebar {
            width: 200px;
            background-color: #ffffff;
            padding: 20px;
            border-right: 1px solid #ddd;
        }

        .sidebar h2 {
            margin-bottom: 20px;
            font-size: 1.2rem;
            color: #b71c1c;
        }

        .sidebar nav ul {
            list-style: none;
            padding: 0;
        }

        .sidebar nav ul li {
            margin-bottom: 10px;
        }

        .sidebar nav ul li a {
            text-decoration: none;
            color: #333;
            display: block;
            padding: 8px;
            border-radius: 4px;
        }

        .sidebar nav ul li a:hover {
            background-color: #f8d7da;
        }

        .sidebar nav ul li.active a {
            background-color: #b71c1c;
            color: white;
        }

        /* Conteúdo */
        .conteudo {
            flex: 1;
            padding: 40px 50px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Impede scroll no conteúdo principal */
        }

        /* Cabeçalho */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .header h1 {
            font-size: 2em;
            color: black;
        }

        .data-hora {
            font-size: 0.9em;
            color: #666;
        }

        /* Resumo */
        .resumo {
            background-color: #FFFFFF;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: bold;
            color: #b71c1c;
        }

        /* Label de acesso */
        .acesso-info {
            margin-top: 15px;
            font-size: 0.85em;
            color: #555;
            text-align: center;
        }

        /* Rodapé fixo estilo barra do Windows */
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #e60000;
            color: white;
            padding: 10px 0;
            text-align: center;
            font-size: 0.85em;
            z-index: 1000;
        }

        /* Container principal dos gráficos */
        .graficos-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-bottom: 20px;
        }

        /* Container do scroll horizontal */
        .graficos-scroll-container {
            position: relative;
            flex: 1;
            overflow: hidden;
        }

        /* Setas de navegação */
        .scroll-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .scroll-arrow.left {
            left: 10px;
        }

        .scroll-arrow.right {
            right: 10px;
        }

        .graficos-scroll-container:hover .scroll-arrow {
            opacity: 1;
        }

        .scroll-arrow:hover {
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .scroll-arrow::after {
            content: '';
            width: 12px;
            height: 12px;
            border-top: 3px solid #e60000;
            border-right: 3px solid #e60000;
        }

        .scroll-arrow.left::after {
            transform: rotate(-135deg);
            margin-left: 4px;
        }

        .scroll-arrow.right::after {
            transform: rotate(45deg);
            margin-right: 4px;
        }

        /* Área de gráficos com scroll horizontal */
        .graficos-container {
            width: 100%;
            height: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-behavior: smooth;
            padding: 10px 5px 25px 5px;
            scrollbar-width: thin;
            scrollbar-color: #e60000 transparent;
        }

        .graficos-container::-webkit-scrollbar {
            height: 8px;
        }

        .graficos-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .graficos-container::-webkit-scrollbar-thumb {
            background: #e60000;
            border-radius: 10px;
        }

        .graficos-container::-webkit-scrollbar-thumb:hover {
            background: #8a1212;
        }

        /* Grid de gráficos */
        .graficos {
            display: inline-flex;
            gap: 20px;
            height: 100%;
        }

        /* Container individual do gráfico */
        .grafico-container {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            height: 100%;
            width: 400px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .grafico-container:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .grafico-container.active {
            border-color: #e60000;
            box-shadow: 0 6px 16px rgba(230, 0, 0, 0.2);
            transform: translateY(-5px);
        }

        .grafico-container h3 {
            margin-bottom: 10px;
            color: #b71c1c;
            text-align: center;
        }

        .grafico-container canvas {
            flex: 1;
            width: 100% !important;
            height: 100% !important;
        }

        .btn-relatorio {
            background-color: #e60000;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-top: 10px;
            transition: background-color 0.3s;
            align-self: flex-start;
        }

        .btn-relatorio:hover {
            background-color: #8a1212;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .conteudo {
                padding: 20px;
                height: auto;
            }
            
            .grafico-container {
                width: 300px;
            }
            
            .scroll-arrow {
                opacity: 0.7; /* Sempre visível em mobile */
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const agora = new Date();
            const opcoes = {
                day: '2-digit', month: '2-digit', year: 'numeric',
                hour: '2-digit', minute: '2-digit', second: '2-digit'
            };
            document.getElementById("acesso-info").textContent =
                `Acesso em: ${agora.toLocaleDateString('pt-BR', opcoes)}`;

            // Preencher filtros de data
            preencherFiltrosData();

            // Inicializar gráficos
            inicializarGraficos();

            // Configurar navegação por setas
            configurarNavegacao();

            // Adicionar evento de clique para destacar gráficos
            document.querySelectorAll('.grafico-container').forEach(container => {
                container.addEventListener('click', () => {
                    // Remove a classe active de todos os gráficos
                    document.querySelectorAll('.grafico-container').forEach(c => {
                        c.classList.remove('active');
                    });
                    // Adiciona a classe active apenas ao gráfico clicado
                    container.classList.add('active');
                });
            });
        });

        function preencherFiltrosData() {
            // Preencher anos (últimos 5 anos)
            const anoSelect = document.getElementById('filtro-ano');
            const anoAtual = new Date().getFullYear();
            for (let i = anoAtual; i >= anoAtual - 5; i--) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                if (i === anoAtual) option.selected = true;
                anoSelect.appendChild(option);
            }

            // Preencher meses
            const mesSelect = document.getElementById('filtro-mes');
            const meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            meses.forEach((mes, index) => {
                const option = document.createElement('option');
                option.value = index + 1;
                option.textContent = mes;
                if (index === new Date().getMonth()) option.selected = true;
                mesSelect.appendChild(option);
            });

            // Preencher dias
            const diaSelect = document.getElementById('filtro-dia');
            for (let i = 1; i <= 31; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                if (i === new Date().getDate()) option.selected = true;
                diaSelect.appendChild(option);
            }
        }

        function inicializarGraficos() {
            // Dados exemplo para gráficos
            const vendasMes = [120, 150, 100, 170, 200, 180, 210, 190, 230, 250, 220, 260];
            const ctx1 = document.getElementById('grafico-vendas').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                    datasets: [{
                        label: 'Vendas',
                        data: vendasMes,
                        borderColor: '#e60000',
                        backgroundColor: 'rgba(230,0,0,0.1)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            const produtos = ['X-BACON', 'QUATRO QUEIJOS', 'CAFÉ', 'DOIS QUEIJOS', 'GRAVATA'];
            const qtdVendas = [50, 40, 35, 30, 25];
            const ctx2 = document.getElementById('grafico-produtos').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: produtos,
                    datasets: [{
                        label: 'Qtd Vendida',
                        data: qtdVendas,
                        backgroundColor: '#e60000'
                    }]
                },
                options: { 
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false
                }
            });

            // Dados para o gráfico de pizza (distribuição por categoria)
            const categorias = ['Lanches', 'Bebidas', 'Sobremesas', 'Acompanhamentos', 'Promoções'];
            const vendasCategoria = [120, 80, 45, 60, 75];
            const coresCategoria = ['#e60000', '#ff5252', '#ff8a80', '#ffbdbd', '#ffebee'];
            
            const ctx3 = document.getElementById('grafico-pizza').getContext('2d');
            new Chart(ctx3, {
                type: 'pie',
                data: {
                    labels: categorias,
                    datasets: [{
                        data: vendasCategoria,
                        backgroundColor: coresCategoria,
                        borderColor: 'white',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });

            // Dados para o quarto gráfico (exemplo adicional)
            const ctx4 = document.getElementById('grafico-comparativo').getContext('2d');
            new Chart(ctx4, {
                type: 'bar',
                data: {
                    labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'],
                    datasets: [{
                        label: 'Este Mês',
                        data: [120, 150, 180, 200],
                        backgroundColor: '#e60000'
                    }, {
                        label: 'Mês Anterior',
                        data: [100, 130, 160, 180],
                        backgroundColor: '#ff8a80'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
        }

        function configurarNavegacao() {
            const scrollContainer = document.querySelector('.graficos-container');
            const leftArrow = document.querySelector('.scroll-arrow.left');
            const rightArrow = document.querySelector('.scroll-arrow.right');
            
            leftArrow.addEventListener('click', () => {
                scrollContainer.scrollBy({ left: -400, behavior: 'smooth' });
            });
            
            rightArrow.addEventListener('click', () => {
                scrollContainer.scrollBy({ left: 400, behavior: 'smooth' });
            });
            
            // Esconder setas quando não houver mais conteúdo para scroll
            const checkScroll = () => {
                const maxScrollLeft = scrollContainer.scrollWidth - scrollContainer.clientWidth;
                
                if (scrollContainer.scrollLeft <= 10) {
                    leftArrow.style.opacity = '0';
                } else {
                    leftArrow.style.opacity = '0.9';
                }
                
                if (scrollContainer.scrollLeft >= maxScrollLeft - 10) {
                    rightArrow.style.opacity = '0';
                } else {
                    rightArrow.style.opacity = '0.9';
                }
            };
            
            scrollContainer.addEventListener('scroll', checkScroll);
            window.addEventListener('resize', checkScroll);
            checkScroll(); // Verificar estado inicial
        }
    </script>
</head>

<body>
    <div class="container">
        <aside class="sidebar">
            <h2>Cantina Fácil</h2>
            <nav>
                <ul>
                    <li><a href="pedidos.html">Pedidos</a></li>
                    <li class="active"><a href="relatorio.html">Relatório de Vendas</a></li>
                    <li><a href="cardapio.html">Cardápio</a></li>
                    <li><a href="index.html">Sair</a></li>
                </ul>
            </nav>
        </aside>

        <main class="conteudo">
            <header class="header">
                <h1>Relatórios</h1>
                <span id="acesso-info" class="acesso-info"></span>
            </header>

            <section class="resumo">
                <p>📦 Gerencie pedidos, cardápio e muito mais.</p>
                <div class="filtros-relatorio">
                    <label>Ano: <select id="filtro-ano"></select></label>
                    <label>Mês: <select id="filtro-mes"></select></label>
                    <label>Dia: <select id="filtro-dia"></select></label>
                    <button style>Buscar</button>
                </div>
            </section>

            <section class="graficos-section">
                <div class="graficos-scroll-container">
                    <div class="scroll-arrow left"></div>
                    <div class="scroll-arrow right"></div>
                    
                    <div class="graficos-container">
                        <div class="graficos">
                            <div class="grafico-container">
                                <h3>Vendas Mensais</h3>
                                <canvas id="grafico-vendas"></canvas>
                            </div>
                            <div class="grafico-container">
                                <h3>Produtos Mais Vendidos</h3>
                                <canvas id="grafico-produtos"></canvas>
                            </div>
                            <div class="grafico-container">
                                <h3>Distribuição por Categoria</h3>
                                <canvas id="grafico-pizza"></canvas>
                            </div>
                            <div class="grafico-container">
                                <h3>Comparativo Mensal</h3>
                                <canvas id="grafico-comparativo"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <button class="btn-relatorio">Baixar Relatório</button>

            <!-- Rodapé -->
            <footer class="footer">
                <p>© 2025 Cantina Fácil. Todos os direitos reservados.</p>
            </footer>
        </main>
    </div>
</body>

</html>